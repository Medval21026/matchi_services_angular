<div class="space-y-6 p-6">
  <h1 class="text-3xl font-bold text-gray-900">
    {{ 'profil.title' | translate }}
  </h1>

  <!-- Informations du profil -->
  <div class="bg-white rounded-lg shadow-lg p-6">
    <h2 class="text-xl font-semibold text-gray-800 mb-6">
      {{ 'profil.personalInfo' | translate }}
    </h2>

    <div *ngIf="errorMessage" class="mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm">
      {{ errorMessage }}
    </div>

    <div *ngIf="isLoading" class="flex justify-center py-8">
      <div class="animate-spin h-8 w-8 border-b-2 border-blue-500 rounded-full"></div>
    </div>

    <div *ngIf="!isLoading && currentUser" class="space-y-4">
      <!-- Nom -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          {{ 'profil.nom' | translate }}
        </label>
        <div class="w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-900">
          {{ currentUser.nom || '-' }}
        </div>
      </div>

      <!-- Prénom -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          {{ 'profil.prenom' | translate }}
        </label>
        <div class="w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-900">
          {{ currentUser.prenom || '-' }}
        </div>
      </div>

      <!-- Téléphone -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          {{ 'profil.telephone' | translate }}
        </label>
        <div class="w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-gray-900">
          {{ currentUser.telephone || '-' }}
        </div>
      </div>
    </div>
  </div>

  <!-- Modification du mot de passe -->
  <div class="bg-white rounded-lg shadow-lg p-6">
    <h2 class="text-xl font-semibold text-gray-800 mb-6">
      {{ 'profil.changePassword' | translate }}
    </h2>

    <div *ngIf="passwordErrorMessage" class="mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm">
      {{ passwordErrorMessage }}
    </div>

    <form [formGroup]="passwordForm" (ngSubmit)="onUpdatePassword()" class="space-y-4">
      <!-- Mot de passe actuel -->
      <div>
        <label for="motDePasse" class="block text-sm font-medium text-gray-700 mb-2">
          {{ 'profil.currentPassword' | translate }} <span class="text-red-500">*</span>
        </label>
        <input
          type="password"
          id="motDePasse"
          formControlName="motDePasse"
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
          [class.border-red-500]="getFieldError(passwordForm, 'motDePasse')"
        />
        <p *ngIf="getFieldError(passwordForm, 'motDePasse')" class="mt-1 text-sm text-red-600">
          {{ getFieldError(passwordForm, 'motDePasse') }}
        </p>
      </div>

      <!-- Nouveau mot de passe -->
      <div>
        <label for="newMotDePasse" class="block text-sm font-medium text-gray-700 mb-2">
          {{ 'profil.newPassword' | translate }} <span class="text-red-500">*</span>
        </label>
        <input
          type="password"
          id="newMotDePasse"
          formControlName="newMotDePasse"
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
          [class.border-red-500]="getFieldError(passwordForm, 'newMotDePasse')"
        />
        <p *ngIf="getFieldError(passwordForm, 'newMotDePasse')" class="mt-1 text-sm text-red-600">
          {{ getFieldError(passwordForm, 'newMotDePasse') }}
        </p>
      </div>

      <!-- Confirmation du nouveau mot de passe -->
      <div>
        <label for="confirmMotDePasse" class="block text-sm font-medium text-gray-700 mb-2">
          {{ 'profil.confirmPassword' | translate }} <span class="text-red-500">*</span>
        </label>
        <input
          type="password"
          id="confirmMotDePasse"
          formControlName="confirmMotDePasse"
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
          [class.border-red-500]="getPasswordMatchError()"
        />
        <p *ngIf="getPasswordMatchError()" class="mt-1 text-sm text-red-600">
          {{ getPasswordMatchError() }}
        </p>
      </div>

      <!-- Bouton de mise à jour du mot de passe -->
      <div class="flex justify-end pt-4">
        <button
          type="submit"
          class="px-6 py-2 bg-green-600 text-white hover:bg-green-700 rounded-lg transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed"
          [disabled]="isLoadingPassword || passwordForm.invalid"
        >
          <span *ngIf="!isLoadingPassword">{{ 'profil.updatePasswordButton' | translate }}</span>
          <span *ngIf="isLoadingPassword">{{ 'profil.updatingPassword' | translate }}</span>
        </button>
      </div>
    </form>
  </div>
</div>
